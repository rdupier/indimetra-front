<section class="w-screen min-h-[600px] relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] overflow-hidden">
    <!-- imagen de fondo -->
    <div class="absolute inset-0 bg-fixed bg-cover bg-center bg-main-bg opacity-25 -z-10"></div>
    <!-- contenido -->
    <div
        class="max-w-xl mx-auto space-y-6 my-20 text-primary text-bodyS px-12 pb-10 bg-principal rounded-[8px] p-[24px]">
        <form [formGroup]="registerForm" (ngSubmit)="register()" class="flex flex-col items-center gap-[20px] mt-10">
            <p class="text-h4 text-primary text-center">
                Regístrate
            </p>

            <div class="flex flex-col gap-[1.5625rem] w-full max-w-[26.3rem]">
                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">Usuario <span class="text-error">*</span></label>
                    <input type="text" formControlName="username"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="Introduce tu usuario" />
                    @if (registerForm.get('username')?.touched &&
                    registerForm.get('username')?.invalid) {
                    <p class="text-error text-bodyXS mt-[1px]">
                        @if (registerForm.get('username')?.errors?.['required']) { El nombre
                        de usuario es obligatorio } @if
                        (registerForm.get('username')?.errors?.['minlength']) { Mínimo 3
                        caracteres } @if
                        (registerForm.get('username')?.errors?.['pattern']) { No puede ser
                        sólo números }
                    </p>
                    }
                </div>

                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">Email <span class="text-error">*</span></label>
                    <input type="email" formControlName="email"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="correo@dominio.com" />
                    @if (registerForm.get('email')?.touched &&
                    registerForm.get('email')?.invalid) {
                    <p class="text-error text-bodyXS mt-[1px]">
                        @if (registerForm.get('email')?.errors?.['required']) { El email es
                        obligatorio } @if (registerForm.get('email')?.errors?.['email'] ||
                        registerForm.get('email')?.errors?.['pattern']) { Introduce un email
                        válido }
                    </p>
                    }
                </div>

                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">Contraseña <span class="text-error">*</span></label>
                    <input type="password" formControlName="password"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="Introduce tu contraseña" />
                    @if (registerForm.get('password')?.touched &&
                    registerForm.get('password')?.invalid) {
                    <p class="text-error text-bodyXS mt-[1px]">
                        @if (registerForm.get('password')?.errors?.['required']) { La
                        contraseña es obligatoria } @if
                        (registerForm.get('password')?.errors?.['minlength']) { Mínimo 8
                        caracteres }
                    </p>
                    }
                </div>

                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">País <span class="text-error">*</span></label>
                    <input type="text" formControlName="country"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="Ej. España" />
                    @if (registerForm.get('country')?.touched && registerForm.get('country')?.invalid) {
                    <p class="text-error text-bodyXS mt-1">
                        @if (registerForm.get('country')?.errors?.['required']) {
                        El país es obligatorio
                        }
                        @if (registerForm.get('country')?.errors?.['pattern']) {
                        Formato incorrecto
                        }
                    </p>
                    }
                </div>

                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">Imagen de perfil (URL)</label>
                    <input type="text" formControlName="profileImage"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="https://..." />
                    @if (registerForm.get('profileImage')?.touched && registerForm.get('profileImage')?.invalid) {
                    <p class="text-error text-bodyXS mt-[1px]">
                        @if (registerForm.get('profileImage')?.errors?.['pattern']) {
                        Introduce una URL válida
                        }
                    </p>
                    }
                </div>

                <div class="flex flex-col gap-[0.375rem]">
                    <label class="text-bodyS text-primary">Redes sociales</label>
                    <input type="text" formControlName="socialLinks"
                        class="input-form h-[30px] px-[10px] py-[4px] text-secondary text-bodyS"
                        placeholder="https://..." />
                    @if (registerForm.get('socialLinks')?.touched && registerForm.get('socialLinks')?.invalid) {
                    <p class="text-error text-bodyXS mt-[1px]">
                        @if (registerForm.get('socialLinks')?.errors?.['pattern']) {
                        Introduce una URL válida
                        }
                    </p>
                    }
                </div>
            </div>

            <div class="flex flex-col gap-[0.5rem] w-full max-w-[26.3rem]">
                <p class="flex items-start gap-[0.3rem]">
                    <input type="checkbox" formControlName="termsAccepted" id="termsAccepted" class="mt-[2px]"
                        (change)="registerForm.get('termsAccepted')?.markAsTouched()" />
                    <label for="termsAccepted" class="text-bodyS text-primary">
                        Aceptar los términos y condiciones
                    </label>
                </p>
                <p class="text-bodyXS text-secondary w-full text-start">
                    Al registrarte, aceptas los términos recogidos en nuestro
                    <a (click)="openLegalModal()" class="text-underline hover:text-primary cursor-pointer">Aviso
                        legal</a>.
                </p>
            </div>

            @if (registerForm.get('termsAccepted')?.touched &&
            registerForm.get('termsAccepted')?.invalid) {
            <p class="text-error text-bodyXS max-w-[26.3rem]">
                Debes aceptar los términos y condiciones
            </p>
            }

            <p class="text-bodyS w-full max-w-[26.3rem] text-start leading-[12px] mt-4">
                * Campos obligatorios
            </p>

            <div class="w-full max-w-[464px] pt-[8px] flex flex-col gap-[8px] items-center">
                <button type="button" (click)="onRegisterClick()" [ngClass]="{
                    'cursor-not-allowed opacity-60': registerForm.invalid,
                    'cursor-pointer hover:bg-white hover:text-background transition-colors duration-300 ease-in-out': registerForm.valid
                }" class="boton-menu w-[120px] h-[35px] text-bodyXS">
                    Registrarse
                </button>
            </div>

            @if (errorMessage) {
            <p class="text-error text-bodyXS text-center mt-1">{{ errorMessage }}</p>
            }
        </form>

        <p class="text-bodyXS text-primary leading-4 text-center mt-5">
            ¿Ya tienes cuenta?
            <a (click)="abrirModalLogin()" class="text-underline text-action hover:text-primary cursor-pointer">
                Inicia sesión aquí</a>
        </p>

        @if (showLegalModal()) {
        <app-legal-modal [visible]="showLegalModal()" (close)="closeLegalModal()" />
        }
    </div>
</section>