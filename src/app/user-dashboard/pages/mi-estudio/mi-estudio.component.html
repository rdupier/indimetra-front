<app-navbar></app-navbar>

@if (user()) {
  <section class="text-center py-10 text-textBase">
    <div class="flex flex-col items-center gap-3">
      <img
        [src]="user()?.profileImage || 'assets/icons/default-avatar.svg'"
        alt="Foto de perfil"
        class="w-24 h-24 rounded-full object-cover border border-primary"
      />
      <div>
        <h1 class="text-h6 font-semibold">¡Hola, {{ user()?.username }}!</h1>
        <p class="text-bodyS font-semibold text-primary">
          Este es tu estudio, tu espacio personal donde puedes guardar las obras que más te
          <br>
          inspiran y compartir las tuyas propias con el mundo.
        </p>

        <div class="flex justify-center gap-4 mt-6 flex-wrap">
          <button class="boton-menu flex items-center gap-2" (click)="abrirModalSubida()">
            <img src="assets/icons/upload.svg" alt="Subir" class="w-5 h-5" />
            Subir nueva obra
          </button>

          <button class="boton-menu flex items-center gap-2" (click)="verMisMetrajes()">
            <img src="assets/icons/ajust.svg" alt="Gestionar" class="w-5 h-5" />
            Gestionar obras
          </button>

          <button class="boton-menu flex items-center gap-2" (click)="editarPerfil()">
            <img src="assets/icons/edit.svg" alt="Editar" class="w-5 h-5" />
            Editar perfil
          </button>
        </div>

      </div>
    </div>
  </section>

  <section class="w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] bg-background text-textBase mb-10">
    <div>
      <div class="px-[clamp(1rem,2.5vw,48px)] py-3">
        <h2 class="text-l font-semibold text-left">Ver después</h2>
      </div>

      @if (favoritos().length > 0) {
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 px-[clamp(1rem,2.5vw,48px)]">
          @for (corto of favoritos(); track corto.id) {
            <div class="bg-input p-4 rounded-lg shadow">
              <h3 class="text-primary font-semibold mb-2">{{ corto.title }}</h3>
              <p class="text-bodyXS text-secondary mb-2">{{ corto.category }} | {{ corto.releaseYear }}</p>
              <a [routerLink]="['/cortometraje', corto.id]"
                class="text-action text-bodyXS underline hover:text-primary transition">
                Ver detalles
              </a>
            </div>
          }
        </div>
      }
    </div>
  </section>
} @else {
  <div class="text-center mt-10 text-bodyS text-secondary">Cargando datos del usuario...</div>
}

  @if (modalSubida()) {
    <app-upload-modal
      [visible]="true"
      (close)="cerrarModalSubida()"
      (submit)="crearNuevaObra($event)"
    />
  }

<app-footer></app-footer>
