<section
  class="w-full bg-principal text-primary px-[clamp(1rem,2.5vw,48px)] pt-10 pb-6"
>
  <div class="text-center space-y-4 mb-10">
    <h2 class="text-h2">Gestión de reseñas</h2>
  </div>

  <!-- Filtros -->
  <div
    class="flex flex-wrap justify-center gap-x-10 gap-y-6 items-end px-4 py-2"
  >
    <app-filtro-select
      label="PELÍCULA"
      [opciones]="peliculas()"
      [(model)]="filtroPelicula"
    />
    <app-filtro-select
      label="USUARIO"
      [opciones]="usuarios()"
      [(model)]="filtroUsuario"
    />

    <div class="flex gap-3">
      <button
        class="boton-menu flex items-center gap-2 group"
        (click)="resetFiltros()"
      >
        <svg
          class="w-4 h-4 transition fill-[#E3E1DE] group-hover:fill-black"
          viewBox="0 0 32 32"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M28.9467 27.0533C29.1991 27.3036 29.3411 27.6444 29.3411 28C29.3411 28.3555 29.1991 28.6963 28.9467 28.9466L16 17.88 4.94667 28.9466C4.69631 29.199 4.35552 29.341 4 29.341 3.64448 29.341 3.30369 29.199 3.05333 28.9466L14.12 16 3.05333 4.94662C2.71512 4.60841 2.58304 4.11545 2.70683 3.65345 2.83062 3.19144 3.19149 2.83058 3.6535 2.70678 4.1155 2.58299 4.60846 2.71507 4.94667 3.05329L16 14.12 27.0533 3.05329C27.5762 2.53046 28.4238 2.53046 28.9467 3.05329 29.4695 3.57612 29.4695 4.42379 28.9467 4.94662L17.88 16 28.9467 27.0533Z"
          />
        </svg>
      </button>
    </div>
  </div>

  <!-- Reseñas -->
  <section class="max-w-6xl mx-auto pt-10">
    @if (reviewsPaginadas.length === 0) {
    <div class="text-center text-bodyS text-primary font-medium py-12">
      No hay reseñas disponibles con los filtros actuales.
    </div>
    } @else {
    <div class="space-y-4">
      @for (review of reviewsPaginadas; track review.id) {
      <!-- Wrapper de cada reseña -->
      <div class="flex gap-3 items-center">
        <!-- ✅ Checkbox perfectamente centrado verticalmente -->
        <div class="w-10 flex justify-center">
          <input
            type="checkbox"
            class="appearance-none w-5 h-5 border-2 border-white rounded-sm checked:bg-white checked:border-white checked:before:content-['✔'] checked:before:text-black checked:before:text-xs checked:before:font-bold checked:before:flex checked:before:items-center checked:before:justify-center"
          />
        </div>

        <!-- ✅ Contenido completo: nombre + tarjeta -->
        <div class="flex-1 space-y-1">
          <!-- Nombre del usuario -->
          <p class="font-semibold text-primary">{{ review.username }}</p>

          <!-- Comentario y puntuación -->
          <div
            class="flex justify-between items-start gap-4 bg-card px-4 py-3 rounded text-primary"
          >
            <p class="text-bodyS text-[#CCCCCC] flex-1">
              {{ review.comment }}
            </p>
            <div
              class="w-8 h-8 min-w-8 border border-white text-primary font-bold rounded flex items-center justify-center"
            >
              {{ review.rating }}
            </div>
          </div>
        </div>
      </div>
      }
    </div>
    }
  </section>

  <!-- Paginación -->
  <div
    class="flex justify-center items-center gap-6 pt-16 text-primary font-semibold"
  >
    @if (paginaActual() > 0) {
    <button (click)="paginaAnterior()" class="boton-menu">Anterior</button>
    }

    <span>Página {{ paginaActual() + 1 }} de {{ totalPaginas() }}</span>

    @if (paginaActual() < totalPaginas() - 1) {
    <button (click)="siguientePagina()" class="boton-menu">Siguiente</button>
    }
  </div>

  <!-- Acciones -->
  <div class="flex justify-end gap-4 pt-10 max-w-6xl mx-auto">
    <button
      class="boton-menu px-6"
      (click)="eliminarSeleccionadas()"
      [disabled]="seleccionadas().size === 0"
    >
      Eliminar
    </button>
    <button class="boton-menu px-6" (click)="resetFiltros()">Cancelar</button>
  </div>
</section>
